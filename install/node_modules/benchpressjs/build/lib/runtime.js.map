{"version":3,"sources":["../../lib/runtime.js"],"names":["guard","value","Array","isArray","length","iter","obj","each","output","keys","Object","i","key","helper","context","helpers","helperName","args","out","apply","e","runtime","templateFunction","toString","module","exports","Promise","try","fn","resolve"],"mappings":"AAAA;AAEA;AACA;AACA;AACA;AACA;;AACA,SAASA,KAAT,CAAeC,KAAf,EAAsB;AACpB,SAAOA,KAAK,IAAI,IAAT,IAAkBC,KAAK,CAACC,OAAN,CAAcF,KAAd,KAAwBA,KAAK,CAACG,MAAN,KAAiB,CAA3D,GAAgE,EAAhE,GAAqEH,KAA5E;AACD;AAED;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASI,IAAT,CAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AACvB,MAAI,CAACD,GAAD,IAAQ,OAAOA,GAAP,KAAe,QAA3B,EAAqC;AAAE,WAAO,EAAP;AAAY;;AAEnD,MAAIE,MAAM,GAAG,EAAb;AACA,QAAMC,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAYH,GAAZ,CAAb;AACA,QAAMF,MAAM,GAAGK,IAAI,CAACL,MAApB;;AAEA,OAAK,IAAIO,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGP,MAApB,EAA4BO,CAAC,IAAI,CAAjC,EAAoC;AAClC,UAAMC,GAAG,GAAGH,IAAI,CAACE,CAAD,CAAhB;AACAH,IAAAA,MAAM,IAAID,IAAI,CAACK,GAAD,EAAMD,CAAN,EAASP,MAAT,EAAiBE,GAAG,CAACM,GAAD,CAApB,CAAd;AACD;;AAED,SAAOJ,MAAP;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASK,MAAT,CAAgBC,OAAhB,EAAyBC,OAAzB,EAAkCC,UAAlC,EAA8CC,IAA9C,EAAoD;AAClD,MAAI,OAAOF,OAAO,CAACC,UAAD,CAAd,KAA+B,UAAnC,EAA+C;AAC7C,WAAO,EAAP;AACD;;AACD,MAAI;AACF,UAAME,GAAG,GAAGH,OAAO,CAACC,UAAD,CAAP,CAAoBG,KAApB,CAA0BL,OAA1B,EAAmCG,IAAnC,CAAZ;AACA,WAAOC,GAAG,IAAI,EAAd;AACD,GAHD,CAGE,OAAOE,CAAP,EAAU;AACV,WAAO,EAAP;AACD;AACF;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASC,OAAT,CAAiBN,OAAjB,EAA0BD,OAA1B,EAAmCQ,gBAAnC,EAAqD;AACnD,SAAOtB,KAAK,CAACsB,gBAAgB,CAACP,OAAD,EAAUD,OAAV,EAAmBd,KAAnB,EAA0BK,IAA1B,EAAgCQ,MAAhC,CAAjB,CAAL,CAA+DU,QAA/D,EAAP;AACD;AAED;;;AAEAC,MAAM,CAACC,OAAP,GAAiBJ,OAAjB;AAEA;AAEA;;AACA,IAAI,OAAOK,OAAO,CAACC,GAAf,KAAuB,UAA3B,EAAuC;AACrCD,EAAAA,OAAO,CAACC,GAAR,GAAc;AACZA,IAAAA,GAAG,CAACC,EAAD,EAAK;AACN,aAAO,IAAIF,OAAJ,CAAYG,OAAO,IAAIA,OAAO,CAACD,EAAE,EAAH,CAA9B,CAAP;AACD;;AAHW,IAIZD,GAJF;AAKD","sourcesContent":["'use strict';\n\n/**\n * Convert null and undefined values to empty strings\n * @param {any} value\n * @returns {string}\n */\nfunction guard(value) {\n  return value == null || (Array.isArray(value) && value.length === 0) ? '' : value;\n}\n\n/**\n * Iterate over an object or array\n * @param {string[]} obj - Iteratee object / array\n * @param {function} each - Callback to execute on each item\n * @return {string}\n */\nfunction iter(obj, each) {\n  if (!obj || typeof obj !== 'object') { return ''; }\n\n  let output = '';\n  const keys = Object.keys(obj);\n  const length = keys.length;\n\n  for (let i = 0; i < length; i += 1) {\n    const key = keys[i];\n    output += each(key, i, length, obj[key]);\n  }\n\n  return output;\n}\n\n/**\n * Execute a helper\n * @param {object} context - Base data object\n * @param {object} helpers - Map of helper functions\n * @param {string} helperName - Name of helper to execute\n * @param {any[]} args - Array of arguments\n * @returns {string}\n */\nfunction helper(context, helpers, helperName, args) {\n  if (typeof helpers[helperName] !== 'function') {\n    return '';\n  }\n  try {\n    const out = helpers[helperName].apply(context, args);\n    return out || '';\n  } catch (e) {\n    return '';\n  }\n}\n\n/**\n * Run a compiled template function\n * @param {object} helpers - Map of helper functions\n * @param {object} context - Base data object\n * @param {function} templateFunction - Compiled template function\n * @returns {string}\n */\nfunction runtime(helpers, context, templateFunction) {\n  return guard(templateFunction(helpers, context, guard, iter, helper)).toString();\n}\n\n/* build:SERVER-ONLY:open */\n\nmodule.exports = runtime;\n\n/* build:SERVER-ONLY:close */\n\n// polyfill for Promise.try\nif (typeof Promise.try !== 'function') {\n  Promise.try = {\n    try(fn) {\n      return new Promise(resolve => resolve(fn()));\n    },\n  }.try;\n}\n"],"file":"runtime.js"}